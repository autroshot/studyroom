# 리팩터링 원칙

***리팩터링은 소프트웨어의 겉보기 동작은 그대로 유지한 채, 코드를 이해하고 수정하기 쉽도록 내부 구조를 변경하는 기법이다.***

소프트웨어를 개발하는 동안 '기능 추가'와 '리팩터링'라는 두 모자를 자주 바꿔 쓸 수 있다.

리팩터링을 하는 이유는 다음과 같다.

1. 소프트웨어 설계가 좋아진다.
2. 소프트웨어를 이해하기 쉬워진다.
3. 버그를 쉽게 찾을 수 있다.
4. 프로그래밍 속도를 높일 수 있다.

다음 그래프는 리팩터링과 프로그래밍 속도의 관련성을 보여준다.

<img src="https://user-images.githubusercontent.com/95019875/174960175-5b1cda28-4c1f-45ec-9636-2fba5b60422c.png" alt="좋은 설계 나쁜 설계 그래프" style="zoom: 33%;" />

**설계 지구력 가설** - 내부 설계에 심혈을 기울이면 소프트웨어의 지구력이 높아져서 빠르게 개발할 수 있는 상태를 더 오래 지속할 수 있다.

리팩터링은 코드를 명확하게 만드는 과정이다.

**3의 법칙** - 비슷한 일을 세 번 하게 되면 리팩터링한다.

리팩터링의 궁극적인 목적은 개발 속도를 높여서, 더 적은 노력으로 더 많은 가치를 창출하는 것이다.

**CI**(Continuous Integration)는 지속적 통합으로 TBD(Trunk-Based Development) 트렁크 기반 개발이라고도 불린다. CI와 리팩터링을 합쳐 **XP**(eXtreme Programming)라고 부른다. XP는 애자일 소프트웨어 방법론 중 하나이다.

리팩터링을 위해서는 자가 테스트 코드(self-testing code)가 필요하다.

**유연성 메커니즘** - 다양한 예상 시나리오에 대응하기 위해 함수의 매개변수가 그 예이다.

유연성 메커니즘과 대비되는 것이 **애그니(YAGNI: you aren't going to need it)**이다. 애그니는 간결한 설계, 점진적 설계이다. 변화를 대비해서 유연성을 넣지 않고 지금의 요구사항만을 해결하는 소프트웨어를 만드는 것이다. 리팩터링의 뒷받침이 필요하다.

자가 테스트 코드, 지속적 통합, 리팩터링의 세 가지 기법을 통해 YAGNI 설계 방식으로 개발을 할 수 있다.

진화형 아키텍처(evolutionary architecture) - 아키텍처 관련 결정을 시간을 두고 반복해 내릴 수 있다는 장점을 활용하는 패턴과 실천법을 추구한다.

**TDD**(Test-Driven Development) - 테스트 주도 개발로 자가 테스트 코드와 리팩터링을 묶은 것이다.

코드 전체를 최적화한다면 그중 90%는 효과가 거의 없는 시간 낭비이다.