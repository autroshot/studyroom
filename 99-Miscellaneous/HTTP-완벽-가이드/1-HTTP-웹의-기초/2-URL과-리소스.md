# 2장 URL과 리소스

URL(Uniform Resource Locator, 통합 자원 지시자)은 인터넷의 리소스를 가리키는 표준이름이다. URL은 리소스를 가리키며 그것이 어디에 있고 어떻게 접근할 수 있는지 알려준다.

> 리소스: 식별 가능한 모든 자원이다. 웹에서 사용되는 텍스트, 이미지, 서비스가 그 예이다.

## 1. 인터넷의 리소스 탐색하기

URL은 URI의 부분집합이다. URI는 URL과 URN으로 나눠진다.

다음은 다양한 URL의 예시이다.

- `http://www.joes-hardware.com/seasonal/index-fall.html`
- `mailto:president@whitehouse.gov`
- `ftp://ftp.lots-o-books.com/pub/complete-price-list.xls`
- `rtsp://www.joes-hardware.com:554/interview/cto_video`

이렇게 URL은 인터넷에 있는 어떤 리소스든 가리킬 수 있다.

대부분의 URL은 '스킴://서버위치/경로' 구조로 이루어져 있다.

URL 덕분에 애플리케이션이 리소스에 접근하는 방법이 단순화된다. 사용자는 브라우저가 리소스를 가져오는 데 사용되는 프로토콜과 접근 방식을 알 필요가 없다.

## 2. URL 문법

서로 다른 URL 스킴(HTTP, FTP, SMTP)도 형태와 문법 면에서 거의 동일하다.

URL 스킴의 문법은 다음과 같이 9개 부분으로 나뉜다.

```
<스킴>://<사용자 이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>?<질의>#<프래그먼트>
```

이 모든 컴포넌트를 가지는 URL은 거의 없다. 주로 스킴, 호스트, 경로 정도를 사용한다.

## 3. 단축 URL

### 상대 URL

상대 URL은 기저(base) URL을 기준으로 절대 URL을 추측한다. 브라우저는 상대 URL과 절대 URL 간에 상호 변환이 가능하다.

```
./hammers.html
```

만약 기저 URL이 `http://www.joes-hardware.com/tools.html`이라면 위의 상대 URL은 `http://www.joes-hardware.com/hammers.html`이라는 절대 URL로 해석된다.

### URL 확장

브라우저들은 URL를 입력하는 동안에 자동으로 URL을 확장한다. 사용자는 URL 전체를 입력하지 않아도 된다.

확장 기능은 다음 두 가지로 나뉜다.

- 호스트 명 확장: `yahoo`만 입력하면 `www.yahoo.com`이 만들어진다.
- 히스토리 확장: 사용자가 과거에 방문했던 URL 기록을 이용한다.

## 4. 안전하지 않은 문자

역사적으로 많은 컴퓨터 애플리케이션이 US-ASCⅡ 문자 집합(흔히 아스키 코드)을 사용해왔다. URL에서는 아스키 코드에서 지원하지 않는 문자나 이진 데이터를 지원하기 위해 이스케이프 문자열을 사용한다.

URL에서 안전하지 않은 문자들은 인코딩할 필요가 있다. 인코딩은 안전하지 않은 문자를 퍼센트(`%`)로 시작해, 아스키 코드로 표현되는 두 개의 16진수 숫자로 이루어진 이스케이프 문자로 바꾸는 것을 말한다.

다음은 몇 가지 예시이다.

| 문자 | 아스키 코드 |
| ---- | ----------- |
| ~    | 126 (0x7E)  |
| 공백 | 32 (0x20)   |
| %    | 37 (0x25)   |

다음은 안전하지 않은 문자들이다. 대부분의 특수기호는 안 된다고 보면 된다.

- % / . .. # ? ; : $ + @ & = { } | \ · ~ [ ] ` < > "
- 0x00~0x1F, 0x7F

어떤 애플리케이션에 어떤 URL을 보내든지, 클라이언트 애플리케이션에서 안전하지 않거나 제한된 문자를 변환하는 것이 좋다.

## 5. 스킴의 바다

많이 사용하는 스킴 몇 개만 살펴보겠다.

### http

```
http://<호스트>:<포트>/<경로>?<질의>#<프래그먼트>
```

- 기본 포트값: `80`
- 예시: `http://www.joes-hardware.com/index.html`

### https

http 스킴과 거의 같다. 다른 점은 SSL을 사용한다는 것뿐이다.

```
https://<호스트>:<포트>/<경로>?<질의>#<프래그먼트>
```

- 기본 포트값: `443`
- 예시: `https://www.joes-hardware.com/secure.html`

### ftp

FTP(File Transfer Protocol, 파일 전송 프로토콜) URL은 FTP 서버에 있는 파일을 받거나 올리고, 콘텐츠 목록을 가져오는 데 사용할 수 있다.

```
ftp://<사용자 이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>
```

- 예시: `ftp://anonymous:joe%40joes-hardware.com@prep.ai.mit.edu:21/pub/gnu/`

### file

호스트 기기에서 바로 접근할 수 있는 파일들을 나타낸다. 호스트가 생략되면 로컬 호스트가 기본값이다.

```
file://<호스트>/<경로>
```

- 예시: `file://OFFICE-FS/policies/casual-fridays.doc`

### 기타

mailto, rtsp, rtspu, news, telnet 등이 존재한다.

## 6. 미래

URL의 단점은 리소스가 옮겨지면 URL을 더는 사용할 수 없다는 것이다. URN이 대안이 될 수 있다. URN은 객체가 옮겨지더라도 항상 객체를 가리킬 수 있는 이름을 제공한다.