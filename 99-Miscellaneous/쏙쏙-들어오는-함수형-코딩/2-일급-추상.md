# Ⅱ 일급 추상

## 10. 일급 함수 Ⅰ

**함수 이름에 있는 암묵적 인자**는 코드의 냄새가 된다. 예를 들어 `setPriceByName`, `setShippingByName`, `setQuantityByName`은 함수 이름의 일부가 인자처럼 동작한다.

함수 이름에 있는 암묵적 인자라는 냄새는 두 가지 특징을 보인다.

- 함수 구현이 거의 똑같다. 코드 중복이 생긴다.
- 함수 이름이 구현의 차이를 만든다.

이 문제는 **암묵적 인자를 드러내기**를 통해 해결할 수 있다. 드러낸다는 말은 암묵적인 것을 명시적으로 바꾼다는 것을 의미한다. 암묵적인 이름을 인자로 변경하면 된다. 앞의 예시에 있던 `setPriceByName`, `setShippingByName`, `setQuantityByName` 함수들을 `setFieldByName` 함수 하나로 합칠 수 있다.

```js
function setPriceByName(cart, name, price) { ... }
setPriceByName(cart, 'shoe', 13);

function setFieldByName(cart, name, field, price) { ... }
setPriceByName(cart, 'shoe', 'price', 13);
```

**일급 값(first-class value)**은 언어 전체에서 어디서나 쓸 수 있다. 일급으로 할 수 있는 것은 다음과 같다.

- 변수에 할당
- 함수의 인자로 넘기기
- 함수의 반환값으로 받기
- 배열이나 객체에 담기

자바스크립트에서는 함수명이 일급이 아니다. 따라서 우리는 함수명의 일부를 인자(문자열)로 바꿔 일급으로 만들었다. 언어마다 일급이 아닌 것이 있으며, 이를 일급으로 바꾸는 방법을 아는 것이 중요하다. 일반적으로 함수로 감싸 일급으로 만들 수 있다.

필드명을 인자로 받으면 버그가 생기는 것을 걱정할 수 있다. 이 문제를 해결하는 방법은 두 가지가 있다. 컴파일 타임에 검사하는 방법(타입스크립트 등)과 런타임에 검사하는 방법이다.

필드명을 인자로 받으면 구현이 외부에 노출되는 것이 아닌지 걱정할 수 있다. 하지만 필드명은 내부에서 원하는 대로 바꿀 수 있다.

**데이터 지향(data orientation)**은 이벤트와 엔티티에 대한 사실을 표현하기 위해 일반 데이터 구조를 사용하는 프로그래밍 형식이다. 데이터를 데이터 그대로 사용하면 필요할 때 알맞은 방법으로 해석할 수 있다.

정적 타입 시스템과 동적 타입 시스템 중 어떤 시스템이 더 좋은지 고민하는 것(기술 솔루션)보다 잠을 더 자는 것이 소프트웨어 품질에 더 중요하다. (https://increment.com/teams/the-epistemology-of-software-quality/)

**데이터는 항상 해석이 필요하다.** 정적 타입 언어를 사용해도 마찬가지다. API를 통해 다른 곳에서 받은 데이터는 확인이 필요하다.

자바스크립트에서 일급이 아닌 것의 또 다른 예는 `+` 연산자이다. 하지만 함수로 만들면 일급으로 바꿀 수 있다.

```js
function plus(a, b) {
	return a + b;
}
```

무언가를 일급으로 만들면 강력한 힘이 생긴다.

**고차 함수(high-order function)**는 인자로 함수를 받거나 반환값으로 함수를 반환할 수 있는 함수를 말한다.

**함수 본문을 콜백으로 바꾸기** 리팩터링은 고차 함수를 이용하며 동작을 추상화한다.

**콜백(callback)**은 인자로 전달하는 함수이다. 핸들러 함수라고도 부른다. 콜백으로 전달하는 함수는 나중에 호출될 것을 기대한다. 콜백 함수는 선택적으로 호출되거나, 나중에 호출되거나, 어떤 문맥 안에서 호출될 수 있다. 어떤 문맥 안에서 실행되어야 하는 예는 반복문이나 `try/catch`문이 있다.

**익명 함수(anonymous function)**는 이름이 없는 함수이다. 익명 함수는 보통 필요한 곳에서 인라인(inline)으로 정의한다.

## 11. 일급 함수  Ⅱ
