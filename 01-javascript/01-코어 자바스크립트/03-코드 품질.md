# [03] 코드 품질
코딩 관례(coding practice)에 대해 알아본다.
## 01. Chrome으로 디버깅하기
디버깅(debugging)은 스크립트 내 에러를 검출해 제거하는 일련의 과정을 의미한다. 디버깅 툴은 Chrome 브라우저에서 제공하는 디버깅 툴을 이용한다.
- 중단점(breakpoint): 자바스크립트의 실행이 중단되는 코드 내 지점을 의미한다.
- 조건부 중단점(conditional breakpoint): 표현식을 작성할 수 있으며 해당 표현식이 참인 경우에만 실행을 중지시킬 수 있다. 변수에 특정 값이 할당될 때나 함수의 매개 변수에 특정 값이 들어올 때만 실행을 중단시킬 수 있어 디버깅 시 유용하게 활용할 수 있다.
- 스크립트 내에 `debugger` 명령어를 적어주면 중단점을 설정한 것과 같은 효과를 볼 수 있다.
```javascript
function hello(name) {
  let phrase = `Hello, ${name}!`;

  debugger;  // <-- 여기서 실행이 멈춘다.

  say(phrase);
}
```
- 스크립트 실행이 중단되는 경우는 다음과 같다.
1. 중단점을 만났을 때
2. `debugger`문을 만났을 때
3. 에러가 발생했을 때(개발자 도구가 열려있고 해당 기능이 활성화 되어있는 경우)
- `console.log` 함수를 이용하면 원하는 것을 콘솔에 출력할 수 있다.
- 자세한 디버깅 툴 사용법은 다음 링크를 참조하자.
  - [모던 JavaScript 튜토리얼](https://ko.javascript.info/debugging-chrome)
  - [구글의 공식 매뉴얼](https://developers.google.com/web/tools/chrome-devtools)
<br><br/>
## 02. 코딩 스타일
***개발자는 가능한 한 간결하고 읽기 쉽게 코드를 작성해야 한다.***

몇 가지 추천할만한 규칙은 다음과 같다.  

![code-style](https://user-images.githubusercontent.com/95019875/155277895-ec233dcf-8abc-4869-961f-ef81f41b844a.svg)
  
### 중괄호
여는 중괄호는 새로운 줄이 아닌 같은 줄에 작성하며 여는 중괄호 앞에는 공백이 하나 있어야 한다.
```javascript
if (condition) {
  // 코드 1
  // 코드 2
  // ...코드 n...
}
```
중괄호 안이 한 줄인 코드도 아래와 같이 작성하는 것을 추천한다.
```javascript
if (n < 0) {
  alert(`Power ${n} is not supported`);
}
```

### 가로 길이
코드의 가로 길이가 길어진다면 여러 줄로 나눠 작성하는 것이 좋다. 최대 가로 길이는 보통 80자나 120자로 제한한다.
```javascript
// 백틱(`)을 사용하면 문자열을 여러 줄로 쉽게 나눌 수 있습니다.
let str = `
  ECMA International's TC39 is a group of JavaScript developers,
  implementers, academics, and more, collaborating with the community
  to maintain and evolve the definition of JavaScript.
`;
```
```javascript
if (
  id === 123 &&
  moonPhase === 'Waning Gibbous' &&
  zodiacSign === 'Libra'
) {
  letTheSorceryBegin();
}
```

### 들여쓰기
- 가로 들여쓰기: **스페이스 두 개** 혹은 네 개를 사용하거나 탭 키를 이용해 만들 수 있다. 요즘에는 스페이스가 더 우위에 있다. 스페이스를 이용하면 들여쓰기가 좀 더 유연해진다.
```javascript
show(parameters,
     aligned, // 스페이스 다섯 개를 이용해 들여쓰기를 한다.
     one,
     after,
     another
  ) {
  // ...
}
```
- 세로 들여쓰기: 논리 블록 사이에 넣어 코드를 분리해주는 여분의 줄을 넣어주면 코드의 가독성이 좋아진다. 세로 들여쓰기 없이 코드를 아홉 줄 이상 연속해서 쓰는 것은 좋지 않다.
```javascript
function pow(x, n) {
  let result = 1;
  //              <--
  for (let i = 0; i < n; i++) {
    result *= x;
  }
  //              <--
  return result;
}
```

### 세미콜론
모든 구문의 끝에는 세미콜론을 써주는 것이 좋다.

### 중첩 레벨
가능하면 너무 깊은 중첩문은 사용하지 않아야 한다.
- `continue`를 사용해서 중첩문을 줄일 수 있다.
```javascript
for (let i = 0; i < 10; i++) {
  if (cond) {
    ... // <- 중첩 레벨이 하나 더 늘어났다.
  }
}
```
```javascript
for (let i = 0; i < 10; i++) {
  if (!cond) continue;
  ...  // <- 중첩 레벨이 늘어나지 않는다.
}
```
- `if/else`와 return문을 조합해서 중첩문을 줄일 수 있다.
```javascript
function pow(x, n) {
  if (n < 0) {
    alert('"n"은 음수가 될 수 없습니다.');
  } else {
    let result = 1;

    for (let i = 0; i < n; i++) {
      result *= x;
    }

    return result;
  }
}
```
```javascript
function pow(x, n) {
  if (n < 0) {
    alert('"n"은 음수가 될 수 없습니다.');
    return;
  }

  let result = 1;

  for (let i = 0; i < n; i++) {
    result *= x;
  }

  return result;
}
```

### 함수의 위치
함수를 사용하는 코드가 먼저 있고 그 이후에 함수를 선언하는 방식을 선호한다. 사람들은 이 코드가 무엇을 하는지를 생각하며 코드를 읽기 때문에 코드가 먼저 나오는 것이 자연스럽다. 그리고 함수의 이름을 제대로 만들었다면 함수 본문을 읽을 필요도 없을 것이다.
```javascript
// 헬퍼 함수를 사용하는 코드
let elem = createElement();
setHandler(elem);
walkAround();

// --- 헬퍼 함수 ---
function createElement() {
  ...
}

function setHandler(elem) {
  ...
}

function walkAround() {
  ...
}
```

### 스타일 가이드
코딩 스타일 가이드는 **코드를 어떻게 작성할지**에 대한 전반적인 규칙을 담은 문서이다.

추천 스타일 가이드:
- [구글](https://google.github.io/styleguide/jsguide.html)
- [에어비앤비](https://github.com/airbnb/javascript)
- [Idiomatic.JS](https://github.com/rwaldron/idiomatic.js)
- [StandardJS](https://standardjs.com/)

### Linter
Linter를 사용하면 내가 작성한 코드가 스타일 가이드를 준수하고 있는지를 자동으로 확인할 수 있고, 스타일 개선과 관련된 제안도 받을 수 있다.
- [ESLint](http://eslint.org/)

